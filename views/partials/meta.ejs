<% 
    const defaultMeta = {
        title: "Bluesky Tracker",
        description: "Track user statistics and follower counts on bsky.app with Bluesky Tracker!",
        siteName: "Bluesky Tracker",
        image: "https://bluesky.mgcounts.com/images/logo.png",
        url: `https://bluesky.mgcounts.com/${url}`
    };

    let meta = { ...defaultMeta };

    if (url === "index") {
        meta.title = "Bluesky Tracker - The Best Tool for User Stats on bsky.app!";
        meta.description = "Track user statistics and live follower counts on bsky.app effortlessly with Bluesky Tracker!";
    } else if (url.includes("user") && !url.includes("list")) {
        meta.title = `${user.displayName}'s' Statistics and Live Follower Count | Bluesky Tracker`;
        meta.description = `Track ${user.displayName}'s' (@${user.handle}) stats and live follower trends on bsky.app using Bluesky Tracker!`;
    } else if (url.includes("list")) {
        const thing = url.includes("posts") ? "Posts" : "Users";
        meta.title = `Top ${thing} on bsky.app | Bluesky Tracker`;
        meta.description = `Discover the top ${thing.toLowerCase()} trending on bsky.app with Bluesky Tracker!`;
    } else if (url.includes("search") && url.includes("compare")) {
        meta.title = "Compare Users on bsky.app | Bluesky Tracker";
        meta.description = "Find and compare two users' statistics on bsky.app with Bluesky Tracker!";
    } else if (url.includes("compare")) {
        meta.title = `${user1.displayName} vs ${user2.displayName} | Bluesky Tracker`;
        meta.description = `Analyze and compare ${user1.displayName} (@${user1.handle}) and ${user2.displayName} (@${user2.handle})'s stats on bsky.app with Bluesky Tracker!`;
    } else {
        meta.title = "Error: Page Not Found | Bluesky Tracker";
        meta.description = "The page you are looking for does not exist on bsky.app. Explore more on Bluesky Tracker!";
    }
%>

<head>
    <%- include('constants') %>
    <title><%= meta.title %></title>
    <meta name="description" content="<%= meta.description %>">
    <link rel="canonical" href="<%= meta.url %>">

    <!-- Open Graph / Facebook -->
    <meta property="og:title" content="<%= meta.title %>">
    <meta property="og:site_name" content="<%= meta.siteName %>">
    <meta property="og:description" content="<%= meta.description %>">
    <meta property="og:url" content="<%= meta.url %>">
    <meta property="og:image" content="<%= meta.image %>">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="<%= meta.title %>">
    <meta name="twitter:description" content="<%= meta.description %>">
    <meta name="twitter:url" content="<%= meta.url %>">
    <meta name="twitter:image" content="<%= meta.image %>">

    <!-- Stylesheet -->
    <% const stylesheet = url.includes("user") && !url.includes("list") ? url.split('/')[0] : (url.includes("list") ? "list" : (url.includes("compare") ? "compare" : "index")); %>
    <link rel="stylesheet" type="text/css" href="/css/<%= stylesheet %>.css">
</head>