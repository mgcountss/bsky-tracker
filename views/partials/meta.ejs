<% 
    const defaultMeta = {
        title: "Bluesky Tracker",
        description: "Track user statistics and follower counts on bsky.app with Bluesky Tracker!",
        siteName: "Bluesky Tracker",
        image: "https://www.bsky-tracker.xyz/images/logo.png",
        url: `https://www.bsky-tracker.xyz/${url}`,
        tags: ["bsky", "bsky.app", "bluesky", "bluesky tracker", "bsky tracker", "bsky stats", "bsky follower count", "bsky user stats", "bsky user statistics", "bsky user tracker", "bsky follower tracker", "bsky user follower count", "bsky user follower tracker", "bsky user follower stats", "bsky user follower statistics", "bsky user follower count tracker", "bsky user follower stats tracker", "bsky user followers"]
    };

    let meta = { ...defaultMeta };

    if (url === "index") {
        meta.title = "Bluesky Tracker - The Best Tool for User Stats on bsky.app!";
        meta.description = "Track user statistics and live follower counts on bsky.app effortlessly with Bluesky Tracker!";
    } else if (url.includes("user") && !url.includes("list")) {
        if (!user.displayName) user.displayName = user.handle;
        meta.title = `${user.displayName}'s' Statistics and Live Follower Count | Bluesky Tracker`;
        meta.description = `Track ${user.displayName}'s' (@${user.handle}) stats and live follower trends on bsky.app using Bluesky Tracker!`;
    } else if (url.includes("list")) {
        const thing = url.includes("posts") ? "Posts" : "Users";
        meta.title = `Top ${thing} on bsky.app | Bluesky Tracker`;
        meta.description = `Discover the top ${thing.toLowerCase()} trending on bsky.app with Bluesky Tracker!`;
    } else if (url.includes("search") && url.includes("compare")) {
        meta.title = "Compare Users on bsky.app | Bluesky Tracker";
        meta.description = "Find and compare two users' statistics on bsky.app with Bluesky Tracker!";
    } else if (url.includes("compare")) {
        if (!user1.displayName) user1.displayName = user1.handle;
        if (!user2.displayName) user2.displayName = user2.handle;
        meta.title = `${user1.displayName} vs ${user2.displayName} | Bluesky Tracker`;
        meta.description = `Analyze and compare ${user1.displayName} (@${user1.handle}) and ${user2.displayName} (@${user2.handle})'s stats on bsky.app with Bluesky Tracker!`;
    } else if (url.includes("top50")) {
        meta.title = "Top 50 Users on bsky.app | Bluesky Tracker";
        meta.description = "Discover the top 50 users on the bsky.app with Bluesky Tracker!";
    } else {
        meta.title = "Error: Page Not Found | Bluesky Tracker";
        meta.description = "The page you are looking for does not exist on bsky.app. Explore more on Bluesky Tracker!";
    }
%>

<head>
    <%- include('constants') %>
    <title><%= meta.title %></title>
    <meta name="description" content="<%= meta.description %>">
    <link rel="canonical" href="<%= meta.url %>">

    <!-- Open Graph / Facebook -->
    <meta property="og:title" content="<%= meta.title %>">
    <meta property="og:site_name" content="<%= meta.siteName %>">
    <meta property="og:description" content="<%= meta.description %>">
    <meta property="og:url" content="<%= meta.url %>">
    <meta property="og:type" content="website">
    <meta property="og:locale" content="en_US">
    <meta name="keywords" content="<%= meta.tags.join(", ") %>">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="<%= meta.title %>">
    <meta name="twitter:description" content="<%= meta.description %>">
    <meta name="twitter:url" content="<%= meta.url %>">
    <meta name="twitter:image" content="<%= meta.image %>">
    <meta name="google-adsense-account" content="ca-pub-9838868721197638">

    <!-- Stylesheet -->
    <% let stylesheet = url.includes("user") && !url.includes("list") ? url.split('/')[0] : (url.includes("list") ? "list" : (url.includes("compare") ? "compare" : "index")); %>
    <% if (url == 'top50') { stylesheet = 'top50'; } %>
    <link rel="stylesheet" type="text/css" href="/css/<%= stylesheet %>.css">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5666487244102554"
    crossorigin="anonymous"></script>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</head>